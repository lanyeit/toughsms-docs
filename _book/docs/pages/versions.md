# 版本变更记录


## v1.0.0.1 2018-05-30

- 系统首次发布， 本次版本发布的是一个全新设计的系统。


#### RADIUS认证授权功能

1. Authentication报文：支持BAS发起Authentication报文，采用RADIUS协议到AAA系统认证鉴权 
2. Authentication PAP认证方式：支持BAS发起Authentication报文时采用PAP认证方式 
3. Authentication CHAP认证方式：支持BAS发起Authentication报文时采用CHAP认证方式 
4. Authentication MS CHAP V2认证方式：支持BAS发起Authentication报文时采用MS CHAP V2认证方式
5. Authentication授权：在接收BAS Authentication请求报文之后，RADIUS Server根据用户信息资源，对用户授权信息进行封装，通过Authentication响应报文把用户带宽限制、最大时长、IP等信息授权到BAS。 
6. Accounting-On报文：支持BAS发起Accounting-On报文，通知RADIUS该BAS启动成功，开始计费 
7. Accounting-Off报文：支持BAS发起Accounting-Off报文，通知RADIUS该BAS结束计费，在线用户统一下线，BAS进入维护或切换状态 
8. Accounting-Start报文：支持标准RADIUS计费报文分析功能，BAS发起Accounting-Start报文，通知用户计费开始。 
9. Accounting-Interium-Update报文：支持标准RADIUS计费报文分析功能，BAS发起Accounting-Start报文，通知用户计费更新。 
10. Accounting-Stop报文：支持标准RADIUS计费报文分析功能，BAS发起Accounting-Start报文，通知用户计费结束。 
11. 最大会话时长属性下发：支持向BAS认证报文中下发最大会话时长，要求用户在规定时长内下线，以便记录上网记录。 
12. 用户固定IP地址下发：支持向BAS认证报文中下发IP地址信息，用户拨号后使用该固定IP上网,适用于专线用户。 
13. 用户地址池下发：支持向BAS认证报文中下发地址池信息，用户拨号后使用该地址池分配的地址上网。 
14. COA动态授权：支持在用户认证后使用过程中向BRAS系统执行COA动态授权，改变用户计费策略（需BRAS支持）。

#### 认证授权计费辅助功能

1. MAC地址绑定：支持对用户MAC地址初始绑定，已绑定用户如果MAC地址不匹配则认证失败 
2. VLAN/QINQ绑定：支持对用户一层标签或两层标签初始绑定，已绑定用户如果VLAN/QINQ信息不匹配则认证失败 
3. 并发数控制：支持对同一帐号在线数的并发数控制，如果超过该帐号并发数则新认证的用户认证失败 
4. 设置最大会话时长：通过系统配置功能，设置最大会话时长,保证用户在最大会话时长内断线重联，生成上网记录 
5. 认证计费报文数目监控：支持对启动时间内的认证包、计费包进行统计、重置 
6. 释放用户绑定：对已作MAC或VLAN/QINQ绑定的用户进行释放操作，清除原有的用户绑定信息，包括MAC地址信息和一层或两层标签信息。 
7. 并发控制解锁：对异常情况(BAS未发下线报文)，用户并发控制，对其RADIUS上进行强制下线，释放并发数。 
8. 认证计费日志输出：RADIUS Server在认证和记帐过程中，把认证记帐的日志输出到文件中，包括认证成功、认证失败、上线记帐包、下线记帐包等信息。 
9. 上网记录日志输出：RADIUS Server在记帐结束后，根据用户记帐信息，生成上网记录日志。 
10. 免密码认证功能：支持在紧急情况下免用户密码或免密码认证功能。

#### Portal子系统

1. AC强制Portal：用户通过WEB浏览器发起Internet访问请求后，AC可以将该请求强制到Portal服务器，Portal服务器接收强制Portal请求，能根据不同的接入服务器地址/VLANID/DHCP 选项向用户发送指定的WEB Portal页面。
2. 登录名密码验证：对于宽带上网用户提供登录名密码验证，对于验证通过的用户可以继续享受宽带上网业务，认证不通过，不能享受宽带上网业务。系统提供认证后保留页面和认证后不保留页面两种方式，两种方式都能准确统计用户的上线下线时间，并根据此时间反推时长。
3. Portal页面适配：Portal支持用户终端UA信息适配功能，支持为手机/PC终端推送定制Portal页面及认证功能。根据BRAS推送的页面，获取设备的类型，然后根据设备的类型推送不同版本的Portal页面(PC版本和手机版本)。Portal根据手机终端发起Http请求所携带的UA（User Agent）信息中的终端型号字段，为手机推送适配其屏幕宽度的Portal页面，页面尺寸、字体大小、图片尺寸等均需适配相应手机终端。Portal页面能在多种终端及不同类型浏览器（Internet Explorer；360安全浏览器；腾讯QQ浏览器；百度浏览器；谷歌浏览器；搜狗浏览器；火狐浏览器；遨游浏览器；Safari等）中均能正常显示。
4. Portal定制化：系统Portal页面提供可定制化，根据业务需求对不同用户、不同区域推送可编辑的定制化Portal页面。可根据不同区域，例如接入服务器地址/VLANID/DHCP 选项推送不同的Portal。
5. 用户自服务：Portal服务器在用户登陆页面和认证成功的页面上显示“用户自服务”按钮。自服务页面提供功能包括:用户密码修改、上网清单查询、动态带宽调整。
6. 主动下线：用户关闭Portal页面或者点击下线按钮，Portal系统会往BRAS侧发送下线请求信息通知认证系统。
7. 强制下线：对于非法上网用户提供强制下线功能。
8. 推送广告：将解析的强制参数进行组装，调用广告管理系统，获取当前热点广告的信息，并在Portal页面展示。
9. 公告显示：在portal页面提供公告信息、业务介绍、业务订购、常见问题等版块。

#### 系统管理模块

1. 系统配置管理：系统全局配置，可以配置各个模块相关相关依赖的选项。
2. 操作日志管理：记录操作员每项系统业务操作，监控数据变动。
3. 系统日志管理：系统日志记录系统在运行过程中产生的各项关键信息，如错误信息，任务报告，有利于系统管理员跟踪系统故障，定位用户故障等。
4. 数据备份管理：支持数据手工备份，自动备份，手工恢复，备份下载，采用专有的格式压缩保存。
5. 系统状态管理：记录系统所有服务模块的状态，可以对单个或所有服务重启，停止，以及查看实时系统控制台日志，下载日志，方便系统管理员跟踪系统健康状态，定位错误。
6. BRAS 接入设备管理： 配置对接本系统RADIUS认证记账的设备，可支持多设备管理，支持不同厂家设备接入，每台设备可以授权多个组织使用。
7. Wlan 认证管理：基于认证域的模式实现，每个认证域提供一个独立的Portal门户，支持基于认证域的界面定制，认证域下支持多个AP接入。
8. FreeRADIUS 同步节点管理：基于FreeRADIUS 数据同步的模式，支持账号更新实时同步。

#### 运营管理模块

1. 组织结构管理：支持无限组织分级管理，支持不同组织独立运营，互不影响，支持组织节点下分区运营
2. 权限管理：支持按组织节点划分权限，精确控制每项业务操作权限。
3. 操作员管理：基于组织的操作员体系，完善的授权体系，通过权限组授权，支持组织内部区域授权，商品资费的授权
4. 业务管理：支持基础业务定义，在基础业务基础上定义不同价格的商品，每个组织可以定义专属商品。商品支持时段，流量类型，支持商品销售过期管理，
5. 收费项目管理，支持单独的收费项目定义，在业务受理时可以选择添加收费项目进行收费，每个组织可以创建自己的专属收费项目。收费项目支持过期管理，过期后不能再使用。
6. 用户终端管理：用户相关的终端设备如光猫，调制解调器等设备的统一入库，分配，保修，回收等。
7. 客户管理：基于三户模型，用户电子钱包余额管理，多个商品订阅管理，基本资料修改，服务密码修改，
8. 客户受理：营业受理功能，包括用户报装，账号修改，工单受理，密码修改，资费变更，续费，停机，复机，移机，销户，解绑。
9. 工单管理：工单查询，回复，状态变更等。
10. 在线用户管理：查询实时在线用户，包含时间，IP， MAC，端口等关键信息，支持随时清理在线记录，强制下线用户。
11. 上网日志管理 ：查询用户上网记录，包含时间，IP， MAC，端口等关键信息。
12. 用户交易记录：详细记录用户受理缴费的日志，每笔交易记录包含详细的多项费用明细，支持调账，对账。支持明细收据打印。


####  统计报表模块

1. 营业统计：按日，按月，按年，根据商品资费，组织，区域统计用户数，营业额
2. 营业综合报表：提供用户发展趋势图，营业收入趋势图， 组织区域营收比例图， 操作员营收比例图
















